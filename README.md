# Express Server –∑ Passport –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é —Ç–∞ MongoDB Atlas# Express Server –∑ Passport –∞–≤—Ç–æ—Ä—ñ–∑–∞—Ü—ñ—î—é —Ç–∞ MongoDB Atlas# Express Server –∑ Passport –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é

**–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 64.1:** –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ Express –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Passport –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó. **–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 64.1:** –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ Express –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Passport –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó. **–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 64.1:** –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ Express –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Passport –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.

**–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 65.1:** –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è MongoDB Atlas –∑ —ñ—Å–Ω—É—é—á–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º Express.

**–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 65.1:** –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è MongoDB Atlas –∑ —ñ—Å–Ω—É—é—á–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º Express.

## üìã –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É

## üìã –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

–¶–µ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ—î–∫—Ç, —è–∫–∏–π –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é Express —Å–µ—Ä–≤–µ—Ä–∞ –∑:

- **Passport.js** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (LocalStrategy)## üìã –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

- **MongoDB Atlas** –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

- **Express Session** –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤### 1. –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Celebrate + Joi** –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö

### 1. –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –≤–∏–º–æ–≥–∏

- Node.js —Ç–∞ Express.js

### 1. –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- ‚úÖ Node.js —Ç–∞ Express.js- Node.js —Ç–∞ Express.js

- ‚úÖ MongoDB Atlas (—Ö–º–∞—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö)

- ‚úÖ Passport.js –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó- MongoDB Atlas (—Ö–º–∞—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö)### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Passport –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

### 2. –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è MongoDB Atlas- Passport.js –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π MongoDB Node.js Driver

- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —É Atlas- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Passport –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ singleton pattern –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

- ‚úÖ Graceful shutdown –ø—Ä–∏ –∑—É–ø–∏–Ω—Ü—ñ —Å–µ—Ä–≤–µ—Ä–∞### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Passport –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó Passport (LocalStrategy) –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º email —Ç–∞ –ø–∞—Ä–æ–ª—è

### 3. –û–ø–µ—Ä–∞—Ü—ñ—è —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –≤—Ö–æ–¥—É —Ç–∞ –≤–∏—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ MongoDB

- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ª–æ–≥—ñ–∫—É –∑–∞–ø–∏—Ç—É –¥–∞–Ω–∏—Ö –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó `products`- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Passport –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–∏—Ö –Ω–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—É —Å—Ç–æ—Ä–æ–Ω—É —á–µ—Ä–µ–∑ REST API

- ‚úÖ –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó Passport (LocalStrategy) –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º email —Ç–∞ –ø–∞—Ä–æ–ª—è### 3. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π

### 4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–ø–æ–ø–µ—Ä–µ–¥–Ω—î –î–ó)- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –≤—Ö–æ–¥—É —Ç–∞ –≤–∏—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- ‚úÖ LocalStrategy —á–µ—Ä–µ–∑ email —Ç–∞ –ø–∞—Ä–æ–ª—å

- ‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –≤—Ö—ñ–¥, –≤–∏—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤- ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Express —Å–µ—Å—ñ–π (`express-session`) –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

- ‚úÖ –ó–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –∑ middleware

- ‚úÖ –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤### 3. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Å–µ—Å—ñ–π –¥–ª—è —Ç—Ä–∏–≤–∞–ª–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ —Å–µ—Å—ñ—ó —É cookies –∑ `httpOnly` —Ç–∞ `secure`

### –ö—Ä–æ–∫ 1: –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é- ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Express —Å–µ—Å—ñ–π (`express-session`) –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

```````bash- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Å–µ—Å—ñ–π –¥–ª—è —Ç—Ä–∏–≤–∞–ª–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó### 4. –î–æ—Å—Ç—É–ø –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É

git clone https://github.com/PalGalya/dz_js45_64_express_passport.git

cd dz_js45_64_express_passport- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ —Å–µ—Å—ñ—ó —É cookies –∑ `httpOnly` —Ç–∞ `secure`

git checkout dz_js46_65_mongo_express_integration

```- ‚úÖ –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É `/auth/protected`



### –ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π### 4. –î–æ—Å—Ç—É–ø –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É- ‚úÖ Middleware Passport –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ —Å–µ—Å—ñ—ó



```bash- ‚úÖ –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É `/auth/protected`## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

npm install

```- ‚úÖ Middleware Passport –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ —Å–µ—Å—ñ—ó



### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB Atlas`````bash



–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ [MONGODB_SETUP.md](./MONGODB_SETUP.md).### 5. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è MongoDB Atlas# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ



–ö–æ—Ä–æ—Ç–∫–æ:npm install

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)

2. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä (M0 tier)- ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB Atlas –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ MongoDB Node.js Driver

3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Database User —Ç–∞ Network Access

4. –û—Ç—Ä–∏–º–∞–π—Ç–µ connection string- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—ó `products` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –ø—Ä–æ–¥—É–∫—Ç–∏# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä



### –ö—Ä–æ–∫ 4: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è- ‚úÖ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ–π —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ MongoDBnpm start



–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ `.env.example` —è–∫ —à–∞–±–ª–æ–Ω):- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö (seed)



```env- ‚úÖ –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏

MONGODB_URI=mongodb+srv://<username>:<password>@<cluster>.mongodb.net/expressApp?retryWrites=true&w=majority

SESSION_SECRET=your-secret-key-herenpm run dev

PORT=3000

```## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫```



**–í–∞–∂–ª–∏–≤–æ:** –ó–∞–º—ñ–Ω—ñ—Ç—å `<username>`, `<password>` —Ç–∞ `<cluster>` –Ω–∞ –≤–∞—à—ñ –¥–∞–Ω—ñ –∑ MongoDB Atlas.



### –ö—Ä–æ–∫ 5: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:3000`



```bash

# –ó–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º

npm start```bash## üì° API Endpoints



# –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏ –∑ auto-reloadnpm install

npm run dev

``````| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç           | –û–ø–∏—Å                                | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |



–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:| ----- | ----------------- | ----------------------------------- | ----------- |

```````

‚úÖ Successfully connected to MongoDB Atlas### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ MongoDB Atlas| POST | `/auth/register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –ù—ñ |

‚úÖ Sample products added to database

üöÄ Server is running on port 3000| POST | `/auth/login` | –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É | –ù—ñ |

üìÑ Products page: http://localhost:3000/products.html

```1. –°—Ç–≤–æ—Ä—ñ—Ç—å –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)| POST  | `/auth/logout` | –í–∏—Ö—ñ–¥ –∑ —Å–∏—Å—Ç–µ–º–∏ | –¢–∞–∫ |

## üì° API Endpoints2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –∫–ª–∞—Å—Ç–µ—Ä (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π tier –¥–æ—Å—Ç—É–ø–Ω–∏–π)| GET | `/auth/me` | –û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –¢–∞–∫ |

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è3. –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö| GET | `/auth/protected` | –ó–∞—Ö–∏—â–µ–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è) | –¢–∞–∫ |

| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |4. –î–æ–¥–∞–π—Ç–µ IP-–∞–¥—Ä–µ—Å—É –¥–æ whitelist (–∞–±–æ 0.0.0.0/0 –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

|-------|-------------------|-------------------------------|-------------|

| POST | `/auth/register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –ù—ñ |5. –û—Ç—Ä–∏–º–∞–π—Ç–µ connection string### –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

| POST | `/auth/login` | –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É | –ù—ñ |

| POST | `/auth/logout` | –í–∏—Ö—ñ–¥ –∑ —Å–∏—Å—Ç–µ–º–∏ | –¢–∞–∫ |

| GET | `/auth/me` | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –¢–∞–∫ |

| GET | `/auth/protected` | –ó–∞—Ö–∏—â–µ–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ | –¢–∞–∫ |### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª `.env`**–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**

### MongoDB –ø—Ä–æ–¥—É–∫—Ç–∏

| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `.env.example` —è–∫ —à–∞–±–ª–æ–Ω):```bash

|-------|---------------------|------------------------|-------------|

| GET | `/api/products` | –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ | –ù—ñ |curl -X POST http://localhost:3000/auth/register \

| GET | `/api/products/:id` | –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID | –ù—ñ |

| POST | `/api/products` | –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–¥—É–∫—Ç | –ù—ñ |```env -H "Content-Type: application/json" \

### –°—Ç–∞—Ç–∏—á–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏# MongoDB Atlas Connection -d '{"email":"newuser@example.com","password":"password123"}'

| –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å |MONGODB_URI=mongodb+srv://<username>:<password>@<cluster>.mongodb.net/<database>?retryWrites=true&w=majority```

|-------------------|-------------------------------|

| `/products.html` | –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ |

## üíª –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è# Session Secret**–í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:**

### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞SESSION_SECRET=your-secret-key-here

`bash`bash

curl -X POST http://localhost:3000/auth/register \

-H "Content-Type: application/json" \# Server Configurationcurl -X POST http://localhost:3000/auth/login \

-d '{"email":"test@example.com","password":"password123"}'

````PORT=3000 -H "Content-Type: application/json" \



### –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É```  -d '{"email":"admin@example.com","password":"password123"}' \



```bash  -c cookies.txt

curl -X POST http://localhost:3000/auth/login \

  -H "Content-Type: application/json" \### –ö—Ä–æ–∫ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä```

  -d '{"email":"admin@example.com","password":"password123"}' \

  -c cookies.txt

````

````bash**–û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –∑ MongoDB

# –ó–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º

```bash

curl http://localhost:3000/api/productsnpm start```bash

````

curl -X GET http://localhost:3000/auth/me -b cookies.txt

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

`json# –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏ –∑ auto-reload`

{

"status": "success",npm run dev

"data": {

    "products": [```**–î–æ—Å—Ç—É–ø –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏:**

      {

        "id": 1,

        "name": "–ù–æ—É—Ç–±—É–∫ Dell XPS 13",

        "price": 45000,–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:3000````bash

        "description": "–ü–æ—Ç—É–∂–Ω–∏–π —É–ª—å—Ç—Ä–∞–±—É–∫ –¥–ª—è —Ä–æ–±–æ—Ç–∏ —Ç–∞ —Ä–æ–∑–≤–∞–≥",

        "category": "–ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞",curl -X GET http://localhost:3000/auth/protected -b cookies.txt

        "createdAt": "2025-10-27T..."

      }## üì° API Endpoints```

    ],

    "count": 5

}

}### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è**–í–∏—Ö—ñ–¥:**

````



### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É

| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç           | –û–ø–∏—Å                                | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |```bash

```bash

curl -X POST http://localhost:3000/api/products \| ----- | ----------------- | ----------------------------------- | ----------- |curl -X POST http://localhost:3000/auth/logout -b cookies.txt

  -H "Content-Type: application/json" \

  -d '{| POST  | `/auth/register`  | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞       | –ù—ñ          |```

    "name": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤–∞ –º–∏—à–∫–∞",

    "price": 1200,| POST  | `/auth/login`     | –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É                      | –ù—ñ          |

    "description": "–ï—Ä–≥–æ–Ω–æ–º—ñ—á–Ω–∞ –º–∏—à–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏",

    "category": "–ê–∫—Å–µ—Å—É–∞—Ä–∏"| POST  | `/auth/logout`    | –í–∏—Ö—ñ–¥ –∑ —Å–∏—Å—Ç–µ–º–∏                     | –¢–∞–∫         |## üë• –¢–µ—Å—Ç–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

  }'

```| GET   | `/auth/me`        | –û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –¢–∞–∫         |



### –î–æ—Å—Ç—É–ø –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏| GET   | `/auth/protected` | –ó–∞—Ö–∏—â–µ–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è)    | –¢–∞–∫         |1. **Admin:**



```bash

curl http://localhost:3000/auth/protected -b cookies.txt

```### MongoDB –ø—Ä–æ–¥—É–∫—Ç–∏   - Email: `admin@example.com`



## üåê –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å   - Password: `password123`



–í—ñ–¥–∫—Ä–∏–π—Ç–µ —É –±—Ä–∞—É–∑–µ—Ä—ñ: **http://localhost:3000/products.html**| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç               | –û–ø–∏—Å                      | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |



–ù–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:| ----- | --------------------- | ------------------------- | ----------- |2. **User:**

- üõçÔ∏è –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –∑ MongoDB Atlas

- üìä –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤| GET   | `/api/products`       | –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏     | –ù—ñ          |   - Email: `user@example.com`

- üîÑ –ö–Ω–æ–ø–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω| GET   | `/api/products/:id`   | –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID    | –ù—ñ          |   - Password: `userpass`

- ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ REST API

| POST  | `/api/products`       | –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–¥—É–∫—Ç    | –ù—ñ          |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

| GET   | `/products.html`      | –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ | –ù—ñ          |## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

````

dz_js45_64_express_passport/

‚îú‚îÄ‚îÄ src/

‚îÇ ‚îú‚îÄ‚îÄ app.mjs # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–æ–¥–∞—Ç–∫—É### –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤```

‚îÇ ‚îú‚îÄ‚îÄ auth/

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ passport.mjs # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Passport LocalStrategydz_js45_64_express_passport/

‚îÇ ‚îú‚îÄ‚îÄ controllers/

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ auth.mjs # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó**–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**‚îú‚îÄ‚îÄ src/

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ products.mjs # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ MongoDB

‚îÇ ‚îú‚îÄ‚îÄ db/‚îÇ ‚îú‚îÄ‚îÄ app.mjs # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–æ–¥–∞—Ç–∫—É

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ mongodb.mjs # –ú–æ–¥—É–ª—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB Atlas

‚îÇ ‚îú‚îÄ‚îÄ middleware/```bash‚îÇ ‚îú‚îÄ‚îÄ auth/

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ auth.mjs # Middleware –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

‚îÇ ‚îî‚îÄ‚îÄ routes/curl -X POST http://localhost:3000/auth/register \‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ passport.mjs # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Passport (LocalStrategy)

‚îÇ ‚îú‚îÄ‚îÄ auth.mjs # –ú–∞—Ä—à—Ä—É—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

‚îÇ ‚îú‚îÄ‚îÄ products.mjs # –ú–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ -H "Content-Type: application/json" \‚îÇ ‚îú‚îÄ‚îÄ controllers/

‚îÇ ‚îî‚îÄ‚îÄ index.mjs # –ì–æ–ª–æ–≤–Ω–∏–π —Ä–æ—É—Ç–µ—Ä

‚îú‚îÄ‚îÄ public/ -d '{"email":"newuser@example.com","password":"password123"}'‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ auth.mjs # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

‚îÇ ‚îî‚îÄ‚îÄ products.html # –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤

‚îú‚îÄ‚îÄ .env.example # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è```‚îÇ ‚îú‚îÄ‚îÄ middleware/

‚îú‚îÄ‚îÄ .gitignore # Git ignore —Ñ–∞–π–ª

‚îú‚îÄ‚îÄ MONGODB_SETUP.md # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB Atlas‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ auth.mjs # Middleware –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

‚îú‚îÄ‚îÄ package.json # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—É

‚îî‚îÄ‚îÄ README.md # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (—Ü–µ–π —Ñ–∞–π–ª)**–í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:**‚îÇ ‚îî‚îÄ‚îÄ routes/

``````

‚îÇ       ‚îú‚îÄ‚îÄ auth.mjs              # –ú–∞—Ä—à—Ä—É—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

## üë• –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ

```bash‚îÇ       ‚îî‚îÄ‚îÄ index.mjs             # –ì–æ–ª–æ–≤–Ω–∏–π —Ä–æ—É—Ç–µ—Ä

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)

curl -X POST http://localhost:3000/auth/login \‚îú‚îÄ‚îÄ package.json

1. **Admin**

   - Email: `admin@example.com`  -H "Content-Type: application/json" \‚îî‚îÄ‚îÄ README.md

   - Password: `password123`

  -d '{"email":"admin@example.com","password":"password123"}' \```

2. **User**

   - Email: `user@example.com`  -c cookies.txt

   - Password: `userpass`

```## üîê –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –ü—Ä–æ–¥—É–∫—Ç–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å—Å—è –≤ MongoDB)



–ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î 5 —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤:

1. –ù–æ—É—Ç–±—É–∫ Dell XPS 13 - 45,000 ‚Ç¥**–û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑ MongoDB:**- **Passport.js** –∑ LocalStrategy –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ email —Ç–∞ –ø–∞—Ä–æ–ª—å

2. –°–º–∞—Ä—Ç—Ñ–æ–Ω iPhone 15 Pro - 52,000 ‚Ç¥

3. –ù–∞–≤—É—à–Ω–∏–∫–∏ Sony WH-1000XM5 - 12,000 ‚Ç¥- **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å email

4. –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ Logitech MX Keys - 4,500 ‚Ç¥

5. –ú–æ–Ω—ñ—Ç–æ—Ä LG UltraWide 34" - 18,000 ‚Ç¥```bash- **Express-session** –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π



## üîê –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ócurl -X GET http://localhost:3000/api/products- **Cookies** –∑ httpOnly –¥–ª—è –±–µ–∑–ø–µ–∫–∏



### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–î–ó 64.1)```- **Middleware** –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –º–∞—Ä—à—Ä—É—Ç—ñ–≤

- ‚úÖ Passport.js –∑ LocalStrategy

- ‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ email- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** –¥–∞–Ω–∏—Ö (email —Ç–∞ –ø–∞—Ä–æ–ª—å) –∑ Joi —Ç–∞ Celebrate

- ‚úÖ –í—Ö—ñ–¥/–≤–∏—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- ‚úÖ Express Session –∑ httpOnly cookies**–û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID:**- **–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É —Å–µ—Å—ñ—ó

- ‚úÖ –ó–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ —á–µ—Ä–µ–∑ middleware

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö (Joi + Celebrate)- **–î–∏–Ω–∞–º—ñ—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** - –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç–∞ –º–æ–∂—É—Ç—å –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è

- ‚úÖ –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É —Å–µ—Å—ñ—ó

```bash

### MongoDB Integration (–î–ó 65.1)

- ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB Atlas (–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –¥—Ä–∞–π–≤–µ—Ä)curl -X GET http://localhost:3000/api/products/1## üì¶ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π seeding –¥–∞–Ω–∏—Ö`````

- ‚úÖ REST API –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

- ‚úÖ –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö- `express` - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫

- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

- ‚úÖ Graceful shutdown**–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–¥—É–∫—Ç:**- `passport` - –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó



## üì¶ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ- `passport-local` - —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó



```json```bash- `express-session` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏

{

  "dependencies": {curl -X POST http://localhost:3000/api/products \- `celebrate` + `joi` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

    "express": "^5.1.0",

    "passport": "^0.7.0",-H "Content-Type: application/json" \

    "passport-local": "^1.0.0",

    "express-session": "^1.17.3",-d '{## ‚ö†Ô∏è –ü—Ä–∏–º—ñ—Ç–∫–∞

    "celebrate": "^15.0.3",

    "joi": "^18.0.1",    "name": "–ù–æ–≤–∞ –º–∏—à–∫–∞",

    "mongodb": "^6.x",

    "dotenv": "^16.x"    "price": 1200,–¶–µ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç. –ü–∞—Ä–æ–ª—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ. –£ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ:

  },

  "devDependencies": {    "description": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤–∞ –µ—Ä–≥–æ–Ω–æ–º—ñ—á–Ω–∞ –º–∏—à–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏",

    "nodemon": "^3.1.9"

  }    "category": "–ê–∫—Å–µ—Å—É–∞—Ä–∏"- –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (bcrypt, argon2)

}

```}'- –ë–∞–∑—É –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤



## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏````- –ë–µ–∑–ø–µ—á–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è



### –ë–µ–∑–ø–µ–∫–∞- HTTPS –¥–ª—è secure cookies



**–¶–µ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç!** –£ —Ä–µ–∞–ª—å–Ω–æ–º—É production —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ:**–û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**



- üîê **–•–µ—à—É–π—Ç–µ –ø–∞—Ä–æ–ª—ñ** (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ bcrypt –∞–±–æ argon2)```bash

- üóÑÔ∏è **–ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –ë–î** (–∑–∞—Ä–∞–∑ –≤–æ–Ω–∏ –≤ –ø–∞–º'—è—Ç—ñ)curl -X GET http://localhost:3000/auth/me -b cookies.txt

- üîë **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∫–ª–∞–¥–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏** –¥–ª—è —Å–µ—Å—ñ–π````

- üåê **–£–≤—ñ–º–∫–Ω—ñ—Ç—å HTTPS** –¥–ª—è secure cookies

- üõ°Ô∏è **–û–±–º–µ–∂—Ç–µ IP-–∞–¥—Ä–µ—Å–∏** –≤ MongoDB Atlas Network Access**–î–æ—Å—Ç—É–ø –¥–æ –∑–∞—Ö–∏—â–µ–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏:**

- ‚ö° **–î–æ–¥–∞–π—Ç–µ rate limiting** –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –∞—Ç–∞–∫

```bash

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –≤–∏–∫–ª–∞–¥–∞—á–∞curl -X GET http://localhost:3000/auth/protected -b cookies.txt

``````

–§–∞–π–ª `.env` –ù–ï –≤–∫–ª—é—á–µ–Ω–∏–π —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (–≤ `.gitignore`).

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `.env.example` —è–∫ —à–∞–±–ª–æ–Ω —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å —Å–≤–æ—ó–º–∏ –¥–∞–Ω–∏–º–∏ MongoDB Atlas.**–í–∏—Ö—ñ–¥:**

## üîß –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó```bash

curl -X POST http://localhost:3000/auth/logout -b cookies.txt

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB```

- **Singleton pattern** - –æ–¥–Ω–µ –∑'—î–¥–Ω–∞–Ω–Ω—è –Ω–∞ –≤–µ—Å—å –¥–æ–¥–∞—Ç–æ–∫

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—è** –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è## üåê –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- **Timeout –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∑–∞–≤–∏—Å–∞–Ω–Ω—è–º

- **Graceful shutdown** - –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è –∑'—î–¥–Ω–∞–Ω–Ω—è–í—ñ–¥–∫—Ä–∏–π—Ç–µ —É –±—Ä–∞—É–∑–µ—Ä—ñ:

### Data Seeding- **http://localhost:3000/products.html** - —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –∫–∞—Ç–∞–ª–æ–≥–æ–º –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –∑ MongoDB

- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –ø–µ—Ä–µ–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —Å–µ—Ä–≤–µ—Ä–∞–ù–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:

- –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ñ ID –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ

- –ö—Ä–∞—Å–∏–≤–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –∑ MongoDB Atlas

### REST API- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ REST API

- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ HTTP –º–µ—Ç–æ–¥–∏ (GET, POST)- –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤

- JSON —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω

- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º–∏

## üë• –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ

## üìù –ü–æ—Å–∏–ª–∞–Ω–Ω—è

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:** https://github.com/PalGalya/dz_js45_64_express_passport

- **–ì—ñ–ª–∫–∞ –∑ –∑–∞–≤–¥–∞–Ω–Ω—è–º:** `dz_js46_65_mongo_express_integration`1. **Admin:**

- **MongoDB Atlas:** https://www.mongodb.com/cloud/atlas

- **Passport.js Docs:** http://www.passportjs.org/ - Email: `admin@example.com`

  - Password: `password123`

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

2. **User:**

MIT - Email: `user@example.com`

- Password: `userpass`

---

### –ü—Ä–æ–¥—É–∫—Ç–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å—Å—è –≤ MongoDB)

**–í–∏–∫–æ–Ω–∞–ª–∞:** –ì–∞–ª–∏–Ω–∞ –ü–∞–ª—å—á–∏–∫

**–ö—É—Ä—Å:** Hillel IT School - Fullstack JavaScript –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—Å—Ç—å 5 —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤:

**–î–∞—Ç–∞:** –ñ–æ–≤—Ç–µ–Ω—å 2025

- –ù–æ—É—Ç–±—É–∫ Dell XPS 13
- –°–º–∞—Ä—Ç—Ñ–æ–Ω iPhone 15 Pro
- –ù–∞–≤—É—à–Ω–∏–∫–∏ Sony WH-1000XM5
- –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ Logitech MX Keys
- –ú–æ–Ω—ñ—Ç–æ—Ä LG UltraWide 34"

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
dz_js45_64_express_passport/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app.mjs                   # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–æ–¥–∞—Ç–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ passport.mjs          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Passport (LocalStrategy)
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.mjs              # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products.mjs          # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ MongoDB
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mongodb.mjs           # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ —Ä–æ–±–æ—Ç–∞ –∑ MongoDB Atlas
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.mjs              # Middleware –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ       ‚îú‚îÄ‚îÄ auth.mjs              # –ú–∞—Ä—à—Ä—É—Ç–∏ –∞–≤—Ç–æ—Ä—ñ–∑–∞—Ü—ñ—ó
‚îÇ       ‚îú‚îÄ‚îÄ products.mjs          # –ú–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ (MongoDB)
‚îÇ       ‚îî‚îÄ‚îÄ index.mjs             # –ì–æ–ª–æ–≤–Ω–∏–π —Ä–æ—É—Ç–µ—Ä
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ products.html             # –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
‚îú‚îÄ‚îÄ .env.example                  # –ü—Ä–∏–∫–ª–∞–¥ —Ñ–∞–π–ª—É –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## üîê –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–î–ó 64.1)

- **Passport.js** –∑ LocalStrategy –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ email —Ç–∞ –ø–∞—Ä–æ–ª—å
- **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å email
- **Express-session** –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π
- **Cookies** –∑ httpOnly –¥–ª—è –±–µ–∑–ø–µ–∫–∏
- **Middleware** –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** –¥–∞–Ω–∏—Ö (email —Ç–∞ –ø–∞—Ä–æ–ª—å) –∑ Joi —Ç–∞ Celebrate
- **–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É —Å–µ—Å—ñ—ó
- **–î–∏–Ω–∞–º—ñ—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** - –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç–∞ –º–æ–∂—É—Ç—å –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è

### MongoDB Integration (–î–ó 65.1)

- **–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB Atlas** —á–µ—Ä–µ–∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –¥—Ä–∞–π–≤–µ—Ä

# dz_js45_64_express_passport ‚Äî Passport + MongoDB Atlas integration

–ö–æ—Ä–æ—Ç–∫–æ: –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ—î–∫—Ç –Ω–∞ Express —ñ–∑ –ª–æ–∫–∞–ª—å–Ω–æ—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é —á–µ—Ä–µ–∑ Passport (LocalStrategy) —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é MongoDB Atlas –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è/—á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (–∫–æ–ª–µ–∫—Ü—ñ—è `products`).

–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è / –≤—Ö—ñ–¥ / –≤–∏—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (Passport + express-session)
- –ó–∞—Ö–∏—â–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç `/auth/protected`
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB Atlas —á–µ—Ä–µ–∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –¥—Ä–∞–π–≤–µ—Ä `mongodb`
- REST API –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤: `GET /api/products`, `GET /api/products/:id`, `POST /api/products`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π seeding —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É
- –°—Ç–∞—Ç–∏—á–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ `public/products.html` –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö

–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
npm install
```

2. –°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —É –∫–æ—Ä–µ–Ω—ñ (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ `.env.example`):

```env
MONGODB_URI=mongodb+srv://<username>:<password>@<cluster>.mongodb.net/expressApp?retryWrites=true&w=majority
SESSION_SECRET=your-secret
PORT=3000
```

3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:

```bash
npm start
```

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É:

- –°–µ—Ä–≤–µ—Ä: http://localhost:3000
- –°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏: http://localhost:3000/products.html

–§–∞–π–ª–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–æ–≥–ª—è–¥)

```
src/
  ‚îú‚îÄ app.mjs               # –≥–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª ‚Äî –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–µ—Ä–≤–µ—Ä–∞
  ‚îú‚îÄ auth/passport.mjs    # Passport config + —Ç–µ—Å—Ç–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–º–∞—Å–∏–≤ `users`)
  ‚îú‚îÄ controllers/
  ‚îÇ   ‚îú‚îÄ auth.mjs         # register/login/logout/getCurrentUser
  ‚îÇ   ‚îî‚îÄ products.mjs     # —Ä–æ–±–æ—Ç–∞ –∑ –∫–æ–ª–µ–∫—Ü—ñ—î—é products, seed
  ‚îú‚îÄ db/mongodb.mjs       # –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB (singleton)
  ‚îú‚îÄ middleware/auth.mjs  # requireAuth
  ‚îî‚îÄ routes/              # auth + products
public/
  ‚îî‚îÄ products.html        # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
```

–ó–∞—É–≤–∞–≥–∏ –¥–æ –±–µ–∑–ø–µ–∫–∏

- –£ —Ü—å–æ–º—É –æ—Å–≤—ñ—Ç–Ω—å–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ –ø–∞—Ä–æ–ª—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ ‚Äî —Ü–µ —Ä–æ–±–∏—Ç—å—Å—è –Ω–∞–≤–º–∏—Å–Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç–∏. –£ –ø—Ä–æ–¥–∞–∫—à–Ω –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ö–µ—à—É–≤–∞–Ω–Ω—è (bcrypt/argon2) —ñ —Ä–µ–∞–ª—å–Ω—É –±–∞–∑—É –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
- –§–∞–π–ª `.env` –¥–æ–¥–∞–Ω–∏–π —É `.gitignore` ‚Äî –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –Ω–µ –ø—É—à–∏—Ç–µ —Ä–µ–∞–ª—å–Ω–∏–π connection string —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π.

–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ, —è –≤—ñ–¥–ø—Ä–∞–≤–ª—é —á–∏—Å—Ç–∏–π –∫–æ–º—ñ—Ç –∑ —Ü–∏–º–∏ –∑–º—ñ–Ω–∞–º–∏ —Ç–∞ –≤–∏–¥–∞–ª—é –ª–æ–∫–∞–ª—å–Ω—ñ —Å–∫—Ä–∏–Ω—à–æ—Ç–∏ —ñ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é. –¢–∞–∫–æ–∂ –º–æ–∂—É –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ README —â–µ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—ñ–¥ –≤–∞—à—ñ –≤–∏–º–æ–≥–∏ (–º–æ–≤–∞/–ø—Ä–∏–∫–ª–∞–¥–∏ curl —Ç–æ—â–æ).
