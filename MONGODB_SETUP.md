# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB Atlas

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://www.mongodb.com/cloud/atlas
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Try Free" –∞–±–æ "Sign In"
3. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –∞–±–æ —É–≤—ñ–π–¥—ñ—Ç—å

## –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—Ç–µ—Ä–∞

1. –ü—ñ—Å–ª—è –≤—Ö–æ–¥—É –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Build a Database"
2. –í–∏–±–µ—Ä—ñ—Ç—å FREE tier (M0)
3. –í–∏–±–µ—Ä—ñ—Ç—å —Ä–µ–≥—ñ–æ–Ω (–Ω–∞–π–±–ª–∏–∂—á–∏–π –¥–æ –≤–∞—Å, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Frankfurt)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Create"

## –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É

### 3.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

1. –£ —Ä–æ–∑–¥—ñ–ª—ñ "Security" -> "Database Access" –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Add New Database User"
2. –í–∏–±–µ—Ä—ñ—Ç—å –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó: Password
3. –í–≤–µ–¥—ñ—Ç—å username (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `myuser`)
4. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ –∞–±–æ –≤–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (–∑–±–µ—Ä–µ–∂—ñ—Ç—å –π–æ–≥–æ!)
5. –ù–∞–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞: "Read and write to any database"
6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Add User"

### 3.2 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Network Access

1. –£ —Ä–æ–∑–¥—ñ–ª—ñ "Security" -> "Network Access" –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Add IP Address"
2. –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ "Allow Access from Anywhere" (0.0.0.0/0)
   - ‚ö†Ô∏è –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ IP-–∞–¥—Ä–µ—Å–∏!
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Confirm"

## –ö—Ä–æ–∫ 4: –û—Ç—Ä–∏–º–∞–Ω–Ω—è Connection String

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É —Ä–æ–∑–¥—ñ–ª "Database"
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "Connect" –±—ñ–ª—è –≤–∞—à–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
3. –í–∏–±–µ—Ä—ñ—Ç—å "Drivers"
4. –í–∏–±–µ—Ä—ñ—Ç—å Driver: Node.js, Version: 6.8 or later
5. –°–∫–æ–ø—ñ—é–π—Ç–µ Connection String

Connection string –±—É–¥–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```
mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority
```

## –ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env —Ñ–∞–π–ª—É

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É
2. –ó–∞–º—ñ–Ω—ñ—Ç—å `<username>` –Ω–∞ –≤–∞—à username
3. –ó–∞–º—ñ–Ω—ñ—Ç—å `<password>` –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å
4. –ó–∞–º—ñ–Ω—ñ—Ç—å `<cluster>` –Ω–∞ –Ω–∞–∑–≤—É –≤–∞—à–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
5. –î–æ–¥–∞–π—Ç–µ –Ω–∞–∑–≤—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—ñ—Å–ª—è `.net/`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `expressApp`

–ü—Ä–∏–∫–ª–∞–¥:

```env
MONGODB_URI=mongodb+srv://myuser:MyPassword123@cluster0.ab1cd.mongodb.net/expressApp?retryWrites=true&w=majority
SESSION_SECRET=my-super-secret-key-change-in-production
PORT=3000
```

## –ö—Ä–æ–∫ 6: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É

```bash
npm install
npm start
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

–Ø–∫—â–æ –≤—Å–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:

```
‚úÖ Successfully connected to MongoDB Atlas
‚úÖ Sample products added to database
üöÄ Server is running on port 3000
üìÑ Products page: http://localhost:3000/products.html
```

## –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏

### 1. "MongoServerError: bad auth"

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å username —Ç–∞ password —É .env —Ñ–∞–π–ª—ñ
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–µ–º–∞—î –∑–∞–π–≤–∏—Ö –ø—Ä–æ–±—ñ–ª—ñ–≤

### 2. "MongoNetworkError: connection timeout"

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Network Access
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à–∞ IP-–∞–¥—Ä–µ—Å–∞ –¥–æ–¥–∞–Ω–∞ –¥–æ whitelist

### 3. "MongoParseError: Invalid connection string"

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç connection string
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–∞—Ä–æ–ª—å –∑–∞–∫–æ–¥–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∑–∞–º—ñ–Ω—ñ—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–∏ –Ω–∞ %xx)

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### –ü–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö

1. –£ MongoDB Atlas –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ "Database"
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Browse Collections"
3. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ –≤–∞—à—É –±–∞–∑—É –¥–∞–Ω–∏—Ö `expressApp` —Ç–∞ –∫–æ–ª–µ–∫—Ü—ñ—é `products`

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

1. –£ —Ä–æ–∑–¥—ñ–ª—ñ "Metrics" –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
2. –£ —Ä–æ–∑–¥—ñ–ª—ñ "Logs" –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω—å

## –ë–µ–∑–ø–µ–∫–∞ –¥–ª—è Production

‚ö†Ô∏è –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∫–ª–∞–¥–Ω—ñ –ø–∞—Ä–æ–ª—ñ
- –û–±–º–µ–∂—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è (–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—ñ –≤ –∫–æ–¥—ñ)
- –†–µ–≥—É–ª—è—Ä–Ω–æ –∑–º—ñ–Ω—é–π—Ç–µ –ø–∞—Ä–æ–ª—ñ
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ backup
